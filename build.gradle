plugins {
  id 'com.github.johnrengelman.shadow' version '5.1.0'
  id 'java'
  id 'application'
}

sourceCompatibility = '11'
targetCompatibility = '11'

mainClassName = 'org.ogolem.general.MainOgolem'

version = 'snapshot'

repositories {
 flatDir { dirs 'libs'}
 mavenCentral()
}

dependencies {
  implementation name: 'atomdroidUFF'
  implementation name: 'corrmd'
  implementation name: 'evbqmdff'
  implementation name: 'lionbench'
  implementation name: 'mpi'
  implementation name: 'scaTTM3F'
  implementation name: 'skalevala'
  implementation 'org.apache.commons:commons-math3:3.6.1'
  implementation 'org.jgrapht:jgrapht-jdk1.5:0.7.3'
  implementation 'org.scala-lang:scala-library:2.12.9'
  implementation 'org.slf4j:slf4j-api:1.7.26'
  testImplementation(
    'junit:junit:4.12',
    'org.junit.jupiter:junit-jupiter-api:5.4.2'
  )
  testRuntime (
    'org.junit.jupiter:junit-jupiter-engine:5.4.2',
    'org.junit.vintage:junit-vintage-engine:5.4.2'
  )
}

sourceSets {
  main {
    java {
      srcDirs = ['src']
    }
  }

  test {
    java {
      srcDirs = ['tests']
    }
  }
}

compileJava {
  options.warnings = true
  options.deprecation = true
  options.debug = true
}

test {
  useJUnitPlatform()
}

shadowJar {
  classifier = null
  minimize{
    exclude(dependency('org.ogolem:.*:.*'))
    exclude(dependency('contrib.atomdroiduff:.*:.*'))
  }
}
